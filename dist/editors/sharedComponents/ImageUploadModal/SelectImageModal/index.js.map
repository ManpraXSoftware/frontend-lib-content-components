{"version":3,"file":"index.js","names":["_react","_interopRequireDefault","require","_reactRedux","_propTypes","_paragon","_icons","_i18n","_redux","_requests","_utils","_hooks","_messages","_BaseModal","_SearchSort","_Gallery","_FileInput","_FetchErrorAlert","_UploadErrorAlert","_ErrorAlert","_jsxRuntime","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","call","TypeError","Number","SelectImageModal","exports","_ref","isOpen","close","setSelection","clearSelection","images","intl","inputIsLoading","_hooks$imgHooks","hooks","imgHooks","galleryError","inputError","fileInput","galleryProps","searchSortProps","selectBtnProps","jsxs","confirmAction","jsx","Button","variant","children","FormattedMessage","messages","nextButtonLabel","footerAction","iconBefore","Add","onClick","click","uploadButtonLabel","title","formatMessage","titleLabel","message","fetchImagesError","uploadImageError","dismissError","dismiss","hideHeading","isError","show","fileSizeError","selectImageError","Stack","gap","Spinner","animation","className","screenReaderText","loading","acceptedFiles","values","acceptedImgKeys","join","propTypes","PropTypes","bool","isRequired","func","arrayOf","string","intlShape","mapStateToProps","state","selectors","requests","isPending","requestKey","RequestKeys","uploadAsset","mapDispatchToProps","_default","injectIntl","connect"],"sources":["../../../../../src/editors/sharedComponents/ImageUploadModal/SelectImageModal/index.jsx"],"sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport PropTypes from 'prop-types';\n\nimport { Button, Stack, Spinner } from '@edx/paragon';\nimport { Add } from '@edx/paragon/icons';\nimport {\n  FormattedMessage,\n  injectIntl,\n  intlShape,\n} from '@edx/frontend-platform/i18n';\nimport { selectors } from '../../../data/redux';\nimport { RequestKeys } from '../../../data/constants/requests';\nimport { acceptedImgKeys } from './utils';\n\nimport hooks from './hooks';\nimport messages from './messages';\nimport BaseModal from '../../BaseModal';\nimport SearchSort from './SearchSort';\nimport Gallery from './Gallery';\nimport FileInput from '../../FileInput';\nimport FetchErrorAlert from '../../ErrorAlerts/FetchErrorAlert';\nimport UploadErrorAlert from '../../ErrorAlerts/UploadErrorAlert';\nimport ErrorAlert from '../../ErrorAlerts/ErrorAlert';\n\nexport const SelectImageModal = ({\n  isOpen,\n  close,\n  setSelection,\n  clearSelection,\n  images,\n  // injected\n  intl,\n  // redux\n  inputIsLoading,\n}) => {\n  const {\n    galleryError,\n    inputError,\n    fileInput,\n    galleryProps,\n    searchSortProps,\n    selectBtnProps,\n  } = hooks.imgHooks({ setSelection, clearSelection, images });\n\n  return (\n    <BaseModal\n      close={close}\n      confirmAction={(\n        <Button {...selectBtnProps} variant=\"primary\">\n          <FormattedMessage {...messages.nextButtonLabel} />\n        </Button>\n      )}\n      isOpen={isOpen}\n      footerAction={(\n        <Button iconBefore={Add} onClick={fileInput.click} variant=\"link\">\n          <FormattedMessage {...messages.uploadButtonLabel} />\n        </Button>\n      )}\n      title={intl.formatMessage(messages.titleLabel)}\n    >\n      {/* Error Alerts */}\n      <FetchErrorAlert message={messages.fetchImagesError} />\n      <UploadErrorAlert message={messages.uploadImageError} />\n      <ErrorAlert\n        dismissError={inputError.dismiss}\n        hideHeading\n        isError={inputError.show}\n      >\n        <FormattedMessage {...messages.fileSizeError} />\n      </ErrorAlert>\n\n      {/* User Feedback Alerts */}\n      <ErrorAlert\n        dismissError={galleryError.dismiss}\n        hideHeading\n        isError={galleryError.show}\n      >\n        <FormattedMessage {...messages.selectImageError} />\n      </ErrorAlert>\n      <Stack gap={3}>\n        <SearchSort {...searchSortProps} />\n        {!inputIsLoading ? <Gallery {...galleryProps} /> : (\n          <Spinner\n            animation=\"border\"\n            className=\"mie-3\"\n            screenReaderText={intl.formatMessage(messages.loading)}\n          />\n        )}\n        <FileInput fileInput={fileInput} acceptedFiles={Object.values(acceptedImgKeys).join()} />\n      </Stack>\n    </BaseModal>\n  );\n};\n\nSelectImageModal.propTypes = {\n  isOpen: PropTypes.bool.isRequired,\n  close: PropTypes.func.isRequired,\n  setSelection: PropTypes.func.isRequired,\n  clearSelection: PropTypes.func.isRequired,\n  images: PropTypes.arrayOf(PropTypes.string).isRequired,\n  // injected\n  intl: intlShape.isRequired,\n  // redux\n  inputIsLoading: PropTypes.bool.isRequired,\n};\n\nexport const mapStateToProps = (state) => ({\n  inputIsLoading: selectors.requests.isPending(state, { requestKey: RequestKeys.uploadAsset }),\n});\n\nexport const mapDispatchToProps = {};\n\nexport default injectIntl(connect(mapStateToProps, mapDispatchToProps)(SelectImageModal));\n"],"mappings":"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"}