{"version":3,"file":"testUtils.js","names":["_reduxMockStore","_interopRequireDefault","require","_reduxThunk","obj","__esModule","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","mockStore","configureMockStore","thunk","createTestFetcher","exports","mockedMethod","thunkAction","args","onDispatch","resolveFn","expectedActions","store","mockReturnValue","Promise","resolve","dispatch","apply","then","undefined","expect","getActions","toEqual","_default"],"sources":["../../../../../src/editors/data/redux/thunkActions/testUtils.js"],"sourcesContent":["/* eslint-disable import/no-extraneous-dependencies */\n/* istanbul ignore file */\nimport configureMockStore from 'redux-mock-store';\nimport thunk from 'redux-thunk';\n\nconst mockStore = configureMockStore([thunk]);\n\n/** createTestFetcher(mockedMethod, thunkAction, args, onDispatch)\n * Creates a testFetch method, which will test a given thunkAction of the form:\n *   ```\n *   const <thunkAction> = (<args>) => (dispatch, getState) => {\n *   ...\n *   return <mockedMethod>.then().catch();\n *   ```\n * The returned function will take a promise handler function, a list of expected actions\n * to have been dispatched (objects only), and an optional verifyFn method to be called after\n * the fetch has been completed.\n *\n * @param {fn} mockedMethod - already-mocked api method being exercised by the thunkAction.\n * @param {fn} thunkAction - thunkAction to call/test\n * @param {array} args - array of args to dispatch the thunkAction with\n * @param {[fn]} onDispatch - optional function to be called after dispatch\n *\n * @return {fn} testFetch method\n *   @param {fn} resolveFn - promise handler of the form (resolve, reject) => {}.\n *     should return a call to resolve or reject with response data.\n *   @param {object[]} expectedActions - array of action objects expected to have been dispatched\n *     will be verified after the thunkAction resolves\n *   @param {[fn]} verifyFn - optional function to be called after dispatch\n */\nexport const createTestFetcher = (\n  mockedMethod,\n  thunkAction,\n  args,\n  onDispatch,\n) => (\n  resolveFn,\n  expectedActions,\n) => {\n  const store = mockStore({});\n  mockedMethod.mockReturnValue(new Promise(resolve => {\n    resolve(new Promise(resolveFn));\n  }));\n  return store.dispatch(thunkAction(...args)).then(() => {\n    onDispatch();\n    if (expectedActions !== undefined) {\n      expect(store.getActions()).toEqual(expectedActions);\n    }\n  });\n};\n\nexport default {\n  createTestFetcher,\n};\n"],"mappings":";;;;;;AAEA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,WAAA,GAAAF,sBAAA,CAAAC,OAAA;AAAgC,SAAAD,uBAAAG,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAAA,SAAAE,mBAAAC,GAAA,WAAAC,kBAAA,CAAAD,GAAA,KAAAE,gBAAA,CAAAF,GAAA,KAAAG,2BAAA,CAAAH,GAAA,KAAAI,kBAAA;AAAA,SAAAA,mBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAG,CAAA,EAAAC,MAAA,SAAAD,CAAA,qBAAAA,CAAA,sBAAAE,iBAAA,CAAAF,CAAA,EAAAC,MAAA,OAAAE,CAAA,GAAAC,MAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAP,CAAA,EAAAQ,KAAA,aAAAL,CAAA,iBAAAH,CAAA,CAAAS,WAAA,EAAAN,CAAA,GAAAH,CAAA,CAAAS,WAAA,CAAAC,IAAA,MAAAP,CAAA,cAAAA,CAAA,mBAAAQ,KAAA,CAAAC,IAAA,CAAAZ,CAAA,OAAAG,CAAA,+DAAAU,IAAA,CAAAV,CAAA,UAAAD,iBAAA,CAAAF,CAAA,EAAAC,MAAA;AAAA,SAAAL,iBAAAkB,IAAA,eAAAC,MAAA,oBAAAD,IAAA,CAAAC,MAAA,CAAAC,QAAA,aAAAF,IAAA,+BAAAH,KAAA,CAAAC,IAAA,CAAAE,IAAA;AAAA,SAAAnB,mBAAAD,GAAA,QAAAiB,KAAA,CAAAM,OAAA,CAAAvB,GAAA,UAAAQ,iBAAA,CAAAR,GAAA;AAAA,SAAAQ,kBAAAR,GAAA,EAAAwB,GAAA,QAAAA,GAAA,YAAAA,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,EAAAD,GAAA,GAAAxB,GAAA,CAAAyB,MAAA,WAAAC,CAAA,MAAAC,IAAA,OAAAV,KAAA,CAAAO,GAAA,GAAAE,CAAA,GAAAF,GAAA,EAAAE,CAAA,IAAAC,IAAA,CAAAD,CAAA,IAAA1B,GAAA,CAAA0B,CAAA,UAAAC,IAAA,IAHhC,uDACA;AAIA,IAAMC,SAAS,GAAG,IAAAC,0BAAkB,EAAC,CAACC,sBAAK,CAAC,CAAC;;AAE7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,IAAMC,iBAAiB,GAAAC,OAAA,CAAAD,iBAAA,GAAG,SAApBA,iBAAiBA,CAC5BE,YAAY,EACZC,WAAW,EACXC,IAAI,EACJC,UAAU;EAAA,OACP,UACHC,SAAS,EACTC,eAAe,EACZ;IACH,IAAMC,KAAK,GAAGX,SAAS,CAAC,CAAC,CAAC,CAAC;IAC3BK,YAAY,CAACO,eAAe,CAAC,IAAIC,OAAO,CAAC,UAAAC,OAAO,EAAI;MAClDA,OAAO,CAAC,IAAID,OAAO,CAACJ,SAAS,CAAC,CAAC;IACjC,CAAC,CAAC,CAAC;IACH,OAAOE,KAAK,CAACI,QAAQ,CAACT,WAAW,CAAAU,KAAA,SAAA7C,kBAAA,CAAIoC,IAAI,EAAC,CAAC,CAACU,IAAI,CAAC,YAAM;MACrDT,UAAU,CAAC,CAAC;MACZ,IAAIE,eAAe,KAAKQ,SAAS,EAAE;QACjCC,MAAM,CAACR,KAAK,CAACS,UAAU,CAAC,CAAC,CAAC,CAACC,OAAO,CAACX,eAAe,CAAC;MACrD;IACF,CAAC,CAAC;EACJ,CAAC;AAAA;AAAC,IAAAY,QAAA,GAAAlB,OAAA,cAEa;EACbD,iBAAiB,EAAjBA;AACF,CAAC"}