{"version":3,"file":"problem.test.js","names":["_","require","_module","_interopRequireWildcard","_olxTestData","_problem2","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","mockOlx","mockBuildOlx","jest","fn","mock","mockImplementation","buildOLX","actions","problem","load","setEnableTypeSelection","updateField","args","fetchAdvancedSettings","fetchAdvanceSettings","blockValue","data","checkboxesOLXWithFeedbackAndHintsOLX","rawOLX","metadata","rawSettings","defaultSettings","max_attempts","describe","dispatch","getState","dispatchedAction","beforeEach","action","afterEach","restoreAllMocks","module","initializeProblem","expect","toHaveBeenCalled","switchToAdvancedEditor","toHaveBeenCalledWith","problemType","ProblemTypeKeys","ADVANCED","it","_dispatch$mock$calls","calls","_dispatch$mock$calls$","not","toEqual","undefined","mockClear","_dispatch$mock$calls2","_dispatch$mock$calls3","onSuccess","_dispatch$mock$calls4","_dispatch$mock$calls5","onFailure","advancedProblemOlX","loadProblem","blankProblemOLX"],"sources":["../../../../../src/editors/data/redux/thunkActions/problem.test.js"],"sourcesContent":["import { actions } from '..';\nimport * as module from './problem';\nimport { checkboxesOLXWithFeedbackAndHintsOLX, advancedProblemOlX, blankProblemOLX } from '../../../containers/ProblemEditor/data/mockData/olxTestData';\nimport { ProblemTypeKeys } from '../../constants/problem';\n\nconst mockOlx = 'SOmEVALue';\nconst mockBuildOlx = jest.fn(() => mockOlx);\njest.mock('../../../containers/ProblemEditor/data/ReactStateOLXParser', () => jest.fn().mockImplementation(() => ({ buildOLX: mockBuildOlx })));\n\njest.mock('..', () => ({\n  actions: {\n    problem: {\n      load: () => {},\n      setEnableTypeSelection: () => {},\n      updateField: (args) => args,\n    },\n  },\n}));\n\njest.mock('./requests', () => ({\n  fetchAdvancedSettings: (args) => ({ fetchAdvanceSettings: args }),\n}));\n\nconst blockValue = {\n  data: {\n    data: checkboxesOLXWithFeedbackAndHintsOLX.rawOLX,\n    metadata: {},\n  },\n};\n\nlet rawOLX = blockValue.data.data;\nconst rawSettings = {};\nconst defaultSettings = { max_attempts: 1 };\n\ndescribe('problem thunkActions', () => {\n  let dispatch;\n  let getState;\n  let dispatchedAction;\n  beforeEach(() => {\n    dispatch = jest.fn((action) => ({ dispatch: action }));\n    getState = jest.fn(() => ({\n      problem: {\n      },\n    }));\n  });\n\n  afterEach(() => {\n    jest.restoreAllMocks();\n  });\n  test('initializeProblem visual Problem :', () => {\n    module.initializeProblem(blockValue)(dispatch);\n    expect(dispatch).toHaveBeenCalled();\n  });\n  test('switchToAdvancedEditor visual Problem', () => {\n    module.switchToAdvancedEditor()(dispatch, getState);\n    expect(dispatch).toHaveBeenCalledWith(\n      actions.problem.updateField({ problemType: ProblemTypeKeys.ADVANCED, rawOLX: mockOlx }),\n    );\n  });\n  describe('fetchAdvanceSettings', () => {\n    it('dispatches fetchAdvanceSettings action', () => {\n      module.fetchAdvancedSettings({ rawOLX, rawSettings })(dispatch);\n      [[dispatchedAction]] = dispatch.mock.calls;\n      expect(dispatchedAction.fetchAdvanceSettings).not.toEqual(undefined);\n    });\n    it('dispatches actions.problem.updateField and loadProblem on success', () => {\n      dispatch.mockClear();\n      module.fetchAdvancedSettings({ rawOLX, rawSettings })(dispatch);\n      [[dispatchedAction]] = dispatch.mock.calls;\n      dispatchedAction.fetchAdvanceSettings.onSuccess({ data: { key: 'test', max_attempts: 1 } });\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.load());\n    });\n    it('calls loadProblem on failure', () => {\n      dispatch.mockClear();\n      module.fetchAdvancedSettings({ rawOLX, rawSettings })(dispatch);\n      [[dispatchedAction]] = dispatch.mock.calls;\n      dispatchedAction.fetchAdvanceSettings.onFailure();\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.load());\n    });\n  });\n  describe('loadProblem', () => {\n    test('initializeProblem advanced Problem', () => {\n      rawOLX = advancedProblemOlX.rawOLX;\n      module.loadProblem({ rawOLX, rawSettings, defaultSettings })(dispatch);\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.load());\n    });\n    test('initializeProblem blank Problem', () => {\n      rawOLX = blankProblemOLX.rawOLX;\n      module.loadProblem({ rawOLX, rawSettings, defaultSettings })(dispatch);\n      expect(dispatch).toHaveBeenCalledWith(actions.problem.setEnableTypeSelection());\n    });\n  });\n});\n"],"mappings":";;;AAAA,IAAAA,CAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,uBAAA,CAAAF,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,SAAA,GAAAJ,OAAA;AAA0D,SAAAK,yBAAAC,WAAA,eAAAC,OAAA,kCAAAC,iBAAA,OAAAD,OAAA,QAAAE,gBAAA,OAAAF,OAAA,YAAAF,wBAAA,YAAAA,yBAAAC,WAAA,WAAAA,WAAA,GAAAG,gBAAA,GAAAD,iBAAA,KAAAF,WAAA;AAAA,SAAAJ,wBAAAQ,GAAA,EAAAJ,WAAA,SAAAA,WAAA,IAAAI,GAAA,IAAAA,GAAA,CAAAC,UAAA,WAAAD,GAAA,QAAAA,GAAA,aAAAE,OAAA,CAAAF,GAAA,yBAAAA,GAAA,uCAAAA,GAAA,UAAAG,KAAA,GAAAR,wBAAA,CAAAC,WAAA,OAAAO,KAAA,IAAAA,KAAA,CAAAC,GAAA,CAAAJ,GAAA,YAAAG,KAAA,CAAAE,GAAA,CAAAL,GAAA,SAAAM,MAAA,WAAAC,qBAAA,GAAAC,MAAA,CAAAC,cAAA,IAAAD,MAAA,CAAAE,wBAAA,WAAAC,GAAA,IAAAX,GAAA,QAAAW,GAAA,kBAAAH,MAAA,CAAAI,SAAA,CAAAC,cAAA,CAAAC,IAAA,CAAAd,GAAA,EAAAW,GAAA,SAAAI,IAAA,GAAAR,qBAAA,GAAAC,MAAA,CAAAE,wBAAA,CAAAV,GAAA,EAAAW,GAAA,cAAAI,IAAA,KAAAA,IAAA,CAAAV,GAAA,IAAAU,IAAA,CAAAC,GAAA,KAAAR,MAAA,CAAAC,cAAA,CAAAH,MAAA,EAAAK,GAAA,EAAAI,IAAA,YAAAT,MAAA,CAAAK,GAAA,IAAAX,GAAA,CAAAW,GAAA,SAAAL,MAAA,cAAAN,GAAA,MAAAG,KAAA,IAAAA,KAAA,CAAAa,GAAA,CAAAhB,GAAA,EAAAM,MAAA,YAAAA,MAAA;AAAA,SAAAW,eAAAC,GAAA,EAAAC,CAAA,WAAAC,eAAA,CAAAF,GAAA,KAAAG,qBAAA,CAAAH,GAAA,EAAAC,CAAA,KAAAG,2BAAA,CAAAJ,GAAA,EAAAC,CAAA,KAAAI,gBAAA;AAAA,SAAAA,iBAAA,cAAAC,SAAA;AAAA,SAAAF,4BAAAG,CAAA,EAAAC,MAAA,SAAAD,CAAA,qBAAAA,CAAA,sBAAAE,iBAAA,CAAAF,CAAA,EAAAC,MAAA,OAAAE,CAAA,GAAApB,MAAA,CAAAI,SAAA,CAAAiB,QAAA,CAAAf,IAAA,CAAAW,CAAA,EAAAK,KAAA,aAAAF,CAAA,iBAAAH,CAAA,CAAAM,WAAA,EAAAH,CAAA,GAAAH,CAAA,CAAAM,WAAA,CAAAC,IAAA,MAAAJ,CAAA,cAAAA,CAAA,mBAAAK,KAAA,CAAAC,IAAA,CAAAT,CAAA,OAAAG,CAAA,+DAAAO,IAAA,CAAAP,CAAA,UAAAD,iBAAA,CAAAF,CAAA,EAAAC,MAAA;AAAA,SAAAC,kBAAAT,GAAA,EAAAkB,GAAA,QAAAA,GAAA,YAAAA,GAAA,GAAAlB,GAAA,CAAAmB,MAAA,EAAAD,GAAA,GAAAlB,GAAA,CAAAmB,MAAA,WAAAlB,CAAA,MAAAmB,IAAA,OAAAL,KAAA,CAAAG,GAAA,GAAAjB,CAAA,GAAAiB,GAAA,EAAAjB,CAAA,IAAAmB,IAAA,CAAAnB,CAAA,IAAAD,GAAA,CAAAC,CAAA,UAAAmB,IAAA;AAAA,SAAAjB,sBAAAH,GAAA,EAAAC,CAAA,QAAAoB,EAAA,WAAArB,GAAA,gCAAAsB,MAAA,IAAAtB,GAAA,CAAAsB,MAAA,CAAAC,QAAA,KAAAvB,GAAA,4BAAAqB,EAAA,QAAAG,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,EAAA,EAAAC,IAAA,OAAAC,EAAA,OAAAC,EAAA,iBAAAJ,EAAA,IAAAL,EAAA,GAAAA,EAAA,CAAAzB,IAAA,CAAAI,GAAA,GAAA+B,IAAA,QAAA9B,CAAA,QAAAX,MAAA,CAAA+B,EAAA,MAAAA,EAAA,UAAAQ,EAAA,uBAAAA,EAAA,IAAAL,EAAA,GAAAE,EAAA,CAAA9B,IAAA,CAAAyB,EAAA,GAAAW,IAAA,MAAAJ,IAAA,CAAAK,IAAA,CAAAT,EAAA,CAAAU,KAAA,GAAAN,IAAA,CAAAT,MAAA,KAAAlB,CAAA,GAAA4B,EAAA,iBAAAM,GAAA,IAAAL,EAAA,OAAAL,EAAA,GAAAU,GAAA,yBAAAN,EAAA,YAAAR,EAAA,eAAAM,EAAA,GAAAN,EAAA,cAAA/B,MAAA,CAAAqC,EAAA,MAAAA,EAAA,2BAAAG,EAAA,QAAAL,EAAA,aAAAG,IAAA;AAAA,SAAA1B,gBAAAF,GAAA,QAAAe,KAAA,CAAAqB,OAAA,CAAApC,GAAA,UAAAA,GAAA;AAE1D,IAAMqC,OAAO,GAAG,WAAW;AAC3B,IAAMC,YAAY,GAAGC,IAAI,CAACC,EAAE,CAAC;EAAA,OAAMH,OAAO;AAAA,EAAC;AAC3CE,IAAI,CAACE,IAAI,CAAC,4DAA4D,EAAE;EAAA,OAAMF,IAAI,CAACC,EAAE,CAAC,CAAC,CAACE,kBAAkB,CAAC;IAAA,OAAO;MAAEC,QAAQ,EAAEL;IAAa,CAAC;EAAA,CAAC,CAAC;AAAA,EAAC;AAE/IC,IAAI,CAACE,IAAI,CAAC,IAAI,EAAE;EAAA,OAAO;IACrBG,OAAO,EAAE;MACPC,OAAO,EAAE;QACPC,IAAI,EAAE,SAAAA,KAAA,EAAM,CAAC,CAAC;QACdC,sBAAsB,EAAE,SAAAA,uBAAA,EAAM,CAAC,CAAC;QAChCC,WAAW,EAAE,SAAAA,YAACC,IAAI;UAAA,OAAKA,IAAI;QAAA;MAC7B;IACF;EACF,CAAC;AAAA,CAAC,CAAC;AAEHV,IAAI,CAACE,IAAI,CAAC,YAAY,EAAE;EAAA,OAAO;IAC7BS,qBAAqB,EAAE,SAAAA,sBAACD,IAAI;MAAA,OAAM;QAAEE,oBAAoB,EAAEF;MAAK,CAAC;IAAA;EAClE,CAAC;AAAA,CAAC,CAAC;AAEH,IAAMG,UAAU,GAAG;EACjBC,IAAI,EAAE;IACJA,IAAI,EAAEC,iDAAoC,CAACC,MAAM;IACjDC,QAAQ,EAAE,CAAC;EACb;AACF,CAAC;AAED,IAAID,MAAM,GAAGH,UAAU,CAACC,IAAI,CAACA,IAAI;AACjC,IAAMI,WAAW,GAAG,CAAC,CAAC;AACtB,IAAMC,eAAe,GAAG;EAAEC,YAAY,EAAE;AAAE,CAAC;AAE3CC,QAAQ,CAAC,sBAAsB,EAAE,YAAM;EACrC,IAAIC,QAAQ;EACZ,IAAIC,QAAQ;EACZ,IAAIC,gBAAgB;EACpBC,UAAU,CAAC,YAAM;IACfH,QAAQ,GAAGtB,IAAI,CAACC,EAAE,CAAC,UAACyB,MAAM;MAAA,OAAM;QAAEJ,QAAQ,EAAEI;MAAO,CAAC;IAAA,CAAC,CAAC;IACtDH,QAAQ,GAAGvB,IAAI,CAACC,EAAE,CAAC;MAAA,OAAO;QACxBK,OAAO,EAAE,CACT;MACF,CAAC;IAAA,CAAC,CAAC;EACL,CAAC,CAAC;EAEFqB,SAAS,CAAC,YAAM;IACd3B,IAAI,CAAC4B,eAAe,CAAC,CAAC;EACxB,CAAC,CAAC;EACFlD,IAAI,CAAC,oCAAoC,EAAE,YAAM;IAC/CmD,OAAM,CAACC,iBAAiB,CAACjB,UAAU,CAAC,CAACS,QAAQ,CAAC;IAC9CS,MAAM,CAACT,QAAQ,CAAC,CAACU,gBAAgB,CAAC,CAAC;EACrC,CAAC,CAAC;EACFtD,IAAI,CAAC,uCAAuC,EAAE,YAAM;IAClDmD,OAAM,CAACI,sBAAsB,CAAC,CAAC,CAACX,QAAQ,EAAEC,QAAQ,CAAC;IACnDQ,MAAM,CAACT,QAAQ,CAAC,CAACY,oBAAoB,CACnC7B,SAAO,CAACC,OAAO,CAACG,WAAW,CAAC;MAAE0B,WAAW,EAAEC,yBAAe,CAACC,QAAQ;MAAErB,MAAM,EAAElB;IAAQ,CAAC,CACxF,CAAC;EACH,CAAC,CAAC;EACFuB,QAAQ,CAAC,sBAAsB,EAAE,YAAM;IACrCiB,EAAE,CAAC,wCAAwC,EAAE,YAAM;MACjDT,OAAM,CAAClB,qBAAqB,CAAC;QAAEK,MAAM,EAANA,MAAM;QAAEE,WAAW,EAAXA;MAAY,CAAC,CAAC,CAACI,QAAQ,CAAC;MAAC,IAAAiB,oBAAA,GAAA/E,cAAA,CACzC8D,QAAQ,CAACpB,IAAI,CAACsC,KAAK;MAAA,IAAAC,qBAAA,GAAAjF,cAAA,CAAA+E,oBAAA;MAAxCf,gBAAgB,GAAAiB,qBAAA;MAClBV,MAAM,CAACP,gBAAgB,CAACZ,oBAAoB,CAAC,CAAC8B,GAAG,CAACC,OAAO,CAACC,SAAS,CAAC;IACtE,CAAC,CAAC;IACFN,EAAE,CAAC,mEAAmE,EAAE,YAAM;MAC5EhB,QAAQ,CAACuB,SAAS,CAAC,CAAC;MACpBhB,OAAM,CAAClB,qBAAqB,CAAC;QAAEK,MAAM,EAANA,MAAM;QAAEE,WAAW,EAAXA;MAAY,CAAC,CAAC,CAACI,QAAQ,CAAC;MAAC,IAAAwB,qBAAA,GAAAtF,cAAA,CACzC8D,QAAQ,CAACpB,IAAI,CAACsC,KAAK;MAAA,IAAAO,qBAAA,GAAAvF,cAAA,CAAAsF,qBAAA;MAAxCtB,gBAAgB,GAAAuB,qBAAA;MAClBvB,gBAAgB,CAACZ,oBAAoB,CAACoC,SAAS,CAAC;QAAElC,IAAI,EAAE;UAAE5D,GAAG,EAAE,MAAM;UAAEkE,YAAY,EAAE;QAAE;MAAE,CAAC,CAAC;MAC3FW,MAAM,CAACT,QAAQ,CAAC,CAACY,oBAAoB,CAAC7B,SAAO,CAACC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC;IACF+B,EAAE,CAAC,8BAA8B,EAAE,YAAM;MACvChB,QAAQ,CAACuB,SAAS,CAAC,CAAC;MACpBhB,OAAM,CAAClB,qBAAqB,CAAC;QAAEK,MAAM,EAANA,MAAM;QAAEE,WAAW,EAAXA;MAAY,CAAC,CAAC,CAACI,QAAQ,CAAC;MAAC,IAAA2B,qBAAA,GAAAzF,cAAA,CACzC8D,QAAQ,CAACpB,IAAI,CAACsC,KAAK;MAAA,IAAAU,qBAAA,GAAA1F,cAAA,CAAAyF,qBAAA;MAAxCzB,gBAAgB,GAAA0B,qBAAA;MAClB1B,gBAAgB,CAACZ,oBAAoB,CAACuC,SAAS,CAAC,CAAC;MACjDpB,MAAM,CAACT,QAAQ,CAAC,CAACY,oBAAoB,CAAC7B,SAAO,CAACC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC;EACJ,CAAC,CAAC;EACFc,QAAQ,CAAC,aAAa,EAAE,YAAM;IAC5B3C,IAAI,CAAC,oCAAoC,EAAE,YAAM;MAC/CsC,MAAM,GAAGoC,+BAAkB,CAACpC,MAAM;MAClCa,OAAM,CAACwB,WAAW,CAAC;QAAErC,MAAM,EAANA,MAAM;QAAEE,WAAW,EAAXA,WAAW;QAAEC,eAAe,EAAfA;MAAgB,CAAC,CAAC,CAACG,QAAQ,CAAC;MACtES,MAAM,CAACT,QAAQ,CAAC,CAACY,oBAAoB,CAAC7B,SAAO,CAACC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;IAC/D,CAAC,CAAC;IACF7B,IAAI,CAAC,iCAAiC,EAAE,YAAM;MAC5CsC,MAAM,GAAGsC,4BAAe,CAACtC,MAAM;MAC/Ba,OAAM,CAACwB,WAAW,CAAC;QAAErC,MAAM,EAANA,MAAM;QAAEE,WAAW,EAAXA,WAAW;QAAEC,eAAe,EAAfA;MAAgB,CAAC,CAAC,CAACG,QAAQ,CAAC;MACtES,MAAM,CAACT,QAAQ,CAAC,CAACY,oBAAoB,CAAC7B,SAAO,CAACC,OAAO,CAACE,sBAAsB,CAAC,CAAC,CAAC;IACjF,CAAC,CAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC"}