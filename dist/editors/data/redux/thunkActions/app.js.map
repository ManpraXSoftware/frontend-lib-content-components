{"version":3,"file":"app.js","names":["_utils","require","_","requests","_interopRequireWildcard","_module","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","fetchBlock","exports","dispatch","onSuccess","response","actions","app","setBlockValue","onFailure","e","console","log","fetchFailure","fetchStudioView","setStudioView","fetchUnit","setUnitUrl","fetchAssets","setAssets","fetchCourseDetails","setCourseDetails","initialize","data","module","saveBlock","_ref","content","returnToUnit","setBlockContent","setSaveResponse","uploadImage","_ref2","file","setSelection","uploadAsset","asset","camelizeKeys","fetchVideos","_ref3","_default","StrictDict"],"sources":["../../../../../src/editors/data/redux/thunkActions/app.js"],"sourcesContent":["import { StrictDict, camelizeKeys } from '../../../utils';\nimport { actions } from '..';\nimport * as requests from './requests';\nimport * as module from './app';\n\nexport const fetchBlock = () => (dispatch) => {\n  dispatch(requests.fetchBlock({\n    onSuccess: (response) => dispatch(actions.app.setBlockValue(response)),\n    // eslint-disable-next-line\n    onFailure: (e) => console.log({ fetchFailure: e }),\n  }));\n};\n\nexport const fetchStudioView = () => (dispatch) => {\n  dispatch(requests.fetchStudioView({\n    onSuccess: (response) => dispatch(actions.app.setStudioView(response)),\n    onFailure: (e) => dispatch(actions.app.setStudioView(e)),\n  }));\n};\n\nexport const fetchUnit = () => (dispatch) => {\n  dispatch(requests.fetchUnit({\n    onSuccess: (response) => dispatch(actions.app.setUnitUrl(response)),\n    onFailure: (e) => dispatch(actions.app.setUnitUrl(e)),\n  }));\n};\n\nexport const fetchAssets = () => (dispatch) => {\n  dispatch(requests.fetchAssets({\n    onSuccess: (response) => dispatch(actions.app.setAssets(response)),\n  }));\n};\n\nexport const fetchCourseDetails = () => (dispatch) => {\n  dispatch(requests.fetchCourseDetails({\n    onSuccess: (response) => dispatch(actions.app.setCourseDetails(response)),\n    onFailure: (e) => dispatch(actions.app.setCourseDetails(e)),\n  }));\n};\n\n/**\n * @param {string} studioEndpointUrl\n * @param {string} blockId\n * @param {string} learningContextId\n * @param {string} blockType\n */\nexport const initialize = (data) => (dispatch) => {\n  dispatch(actions.app.initialize(data));\n  dispatch(module.fetchBlock());\n  dispatch(module.fetchUnit());\n  dispatch(module.fetchStudioView());\n  dispatch(module.fetchAssets());\n  dispatch(module.fetchCourseDetails());\n};\n\n/**\n * @param {func} onSuccess\n */\nexport const saveBlock = ({ content, returnToUnit }) => (dispatch) => {\n  dispatch(actions.app.setBlockContent(content));\n  dispatch(requests.saveBlock({\n    content,\n    onSuccess: (response) => {\n      dispatch(actions.app.setSaveResponse(response));\n      returnToUnit();\n    },\n  }));\n};\n\nexport const uploadImage = ({ file, setSelection }) => (dispatch) => {\n  dispatch(requests.uploadAsset({\n    asset: file,\n    onSuccess: (response) => setSelection(camelizeKeys(response.data.asset)),\n  }));\n};\n\nexport const fetchVideos = ({ onSuccess }) => (dispatch) => {\n  dispatch(requests.fetchAssets({ onSuccess }));\n  // onSuccess(mockData.mockVideoData);\n};\n\nexport default StrictDict({\n  fetchBlock,\n  fetchCourseDetails,\n  fetchStudioView,\n  fetchUnit,\n  fetchVideos,\n  initialize,\n  saveBlock,\n  fetchAssets,\n  uploadImage,\n});\n"],"mappings":"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"}