{"version":3,"file":"selectors.js","names":["_reselect","require","_utils","_video","_reducer","_module","_interopRequireWildcard","AppSelectors","_urls","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","TypeError","Number","stateKeys","keyStore","initialState","video","exports","state","simpleSelectors","videoSource","videoId","fallbackVideos","allowVideoDownloads","videoSharingEnabledForCourse","allowVideoSharing","thumbnail","transcripts","allowTranscriptDownloads","duration","showTranscriptByDefault","handout","licenseType","licenseDetails","courseLicenseType","courseLicenseDetails","allowThumbnailUpload","allowTranscriptImport","reduce","openLanguages","createSelector","module","videoTranscriptLanguages","open","lang","includes","getTranscriptDownloadUrl","studioEndpointUrl","blockId","_ref","language","downloadVideoTranscriptURL","getHandoutDownloadUrl","_ref2","downloadVideoHandoutUrl","videoSettings","_default"],"sources":["../../../../../src/editors/data/redux/video/selectors.js"],"sourcesContent":["import { createSelector } from 'reselect';\n\nimport { keyStore } from '../../../utils';\nimport { videoTranscriptLanguages } from '../../constants/video';\n\nimport { initialState } from './reducer';\nimport * as module from './selectors';\nimport * as AppSelectors from '../app/selectors';\nimport { downloadVideoTranscriptURL, downloadVideoHandoutUrl } from '../../services/cms/urls';\n\nconst stateKeys = keyStore(initialState);\n\nexport const video = (state) => state.video;\n\nexport const simpleSelectors = [\n  stateKeys.videoSource,\n  stateKeys.videoId,\n  stateKeys.fallbackVideos,\n  stateKeys.allowVideoDownloads,\n  stateKeys.videoSharingEnabledForCourse,\n  stateKeys.allowVideoSharing,\n  stateKeys.thumbnail,\n  stateKeys.transcripts,\n  stateKeys.allowTranscriptDownloads,\n  stateKeys.duration,\n  stateKeys.showTranscriptByDefault,\n  stateKeys.handout,\n  stateKeys.licenseType,\n  stateKeys.licenseDetails,\n  stateKeys.courseLicenseType,\n  stateKeys.courseLicenseDetails,\n  stateKeys.allowThumbnailUpload,\n  stateKeys.allowTranscriptImport,\n].reduce((obj, key) => ({ ...obj, [key]: state => state.video[key] }), {});\n\nexport const openLanguages = createSelector(\n  [module.simpleSelectors.transcripts],\n  (transcripts) => {\n    if (!transcripts) {\n      return videoTranscriptLanguages;\n    }\n    const open = Object.keys(videoTranscriptLanguages).filter(\n      (lang) => !transcripts.includes(lang),\n    );\n    return open;\n  },\n);\n\nexport const getTranscriptDownloadUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl, AppSelectors.simpleSelectors.blockId],\n  (studioEndpointUrl, blockId) => ({ language }) => downloadVideoTranscriptURL({\n    studioEndpointUrl,\n    blockId,\n    language,\n  }),\n);\n\nexport const getHandoutDownloadUrl = createSelector(\n  [AppSelectors.simpleSelectors.studioEndpointUrl],\n  (studioEndpointUrl) => ({ handout }) => downloadVideoHandoutUrl({\n    studioEndpointUrl,\n    handout,\n  }),\n);\n\nexport const videoSettings = createSelector(\n  [\n    module.simpleSelectors.videoSource,\n    module.simpleSelectors.videoId,\n    module.simpleSelectors.fallbackVideos,\n    module.simpleSelectors.allowVideoDownloads,\n    module.simpleSelectors.allowVideoSharing,\n    module.simpleSelectors.thumbnail,\n    module.simpleSelectors.transcripts,\n    module.simpleSelectors.allowTranscriptDownloads,\n    module.simpleSelectors.duration,\n    module.simpleSelectors.showTranscriptByDefault,\n    module.simpleSelectors.handout,\n    module.simpleSelectors.licenseType,\n    module.simpleSelectors.licenseDetails,\n  ],\n  (\n    videoSource,\n    videoId,\n    fallbackVideos,\n    allowVideoDownloads,\n    allowVideoSharing,\n    thumbnail,\n    transcripts,\n    allowTranscriptDownloads,\n    duration,\n    showTranscriptByDefault,\n    handout,\n    licenseType,\n    licenseDetails,\n  ) => (\n    {\n      videoSource,\n      videoId,\n      fallbackVideos,\n      allowVideoDownloads,\n      allowVideoSharing,\n      thumbnail,\n      transcripts,\n      allowTranscriptDownloads,\n      duration,\n      showTranscriptByDefault,\n      handout,\n      licenseType,\n      licenseDetails,\n    }\n  ),\n);\n\nexport default {\n  ...simpleSelectors,\n  openLanguages,\n  getTranscriptDownloadUrl,\n  getHandoutDownloadUrl,\n  videoSettings,\n};\n"],"mappings":"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"}