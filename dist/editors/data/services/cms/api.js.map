{"version":3,"file":"api.js","names":["_utils","require","urls","_interopRequireWildcard","_utils2","_module","mockApi","_hooks","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","Symbol","iterator","constructor","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","TypeError","Number","apiMethods","exports","fetchBlockById","_ref","blockId","studioEndpointUrl","block","fetchByUnitId","_ref2","blockAncestor","fetchStudioView","_ref3","blockStudioView","fetchAssets","_ref4","learningContextId","courseAssets","fetchCourseDetails","_ref5","courseDetailsUrl","fetchAdvancedSettings","_ref6","courseAdvanceSettings","uploadAsset","_ref7","asset","data","FormData","append","post","uploadThumbnail","_ref8","videoId","thumbnail","thumbnailUpload","checkTranscriptsForImport","_ref9","youTubeId","getJSON","concat","parameters","encodeURIComponent","importTranscript","_ref10","replaceTranscript","getTranscript","_ref11","language","lang","edx_video_id","videoTranscripts","deleteTranscript","_ref12","deleteJSON","deleteObject","uploadTranscript","_ref13","transcript","_ref13$newLanguage","newLanguage","normalizeContent","_ref14","blockType","content","title","response","category","courseKey","has_changes","id","metadata","display_name","olx","couseKey","settings","_module$processVideoI","module","processVideoIds","videoUrl","videoSource","fallbackVideos","html5Sources","edxVideoId","youtubeId","download_video","allowVideoDownloads","public_access","allowVideoSharing","html5_sources","youtube_id_1_0","download_track","allowTranscriptDownloads","track","show_captions","showTranscriptByDefault","handout","start_time","durationStringFromValue","duration","startTime","end_time","stopTime","license","processLicense","licenseType","licenseDetails","saveBlock","_ref15","fetchVideoFeatures","_ref16","videoFeatures","loadImage","imageData","dateAdded","Date","replace","getTime","loadImages","rawImages","camelizeKeys","reduce","image","_ref17","parseYoutubeId","src","isEdxVideo","uuid4Regex","RegExp","match","youtubeRegex","attribution","noncommercial","noDerivatives","shareAlike","checkMockApi","process","env","REACT_APP_DEVGALLERY","_default"],"sources":["../../../../../src/editors/data/services/cms/api.js"],"sourcesContent":["import { camelizeKeys } from '../../../utils';\nimport * as urls from './urls';\nimport { get, post, deleteObject } from './utils';\nimport * as module from './api';\nimport * as mockApi from './mockApi';\nimport { durationStringFromValue } from '../../../containers/VideoEditor/components/VideoSettingsModal/components/DurationWidget/hooks';\n\nexport const apiMethods = {\n  fetchBlockById: ({ blockId, studioEndpointUrl }) => get(\n    urls.block({ blockId, studioEndpointUrl }),\n  ),\n  fetchByUnitId: ({ blockId, studioEndpointUrl }) => get(\n    urls.blockAncestor({ studioEndpointUrl, blockId }),\n  ),\n  fetchStudioView: ({ blockId, studioEndpointUrl }) => get(\n    urls.blockStudioView({ studioEndpointUrl, blockId }),\n  ),\n  fetchAssets: ({ learningContextId, studioEndpointUrl }) => get(\n    urls.courseAssets({ studioEndpointUrl, learningContextId }),\n  ),\n  fetchCourseDetails: ({ studioEndpointUrl, learningContextId }) => get(\n    urls.courseDetailsUrl({ studioEndpointUrl, learningContextId }),\n  ),\n  fetchAdvancedSettings: ({ studioEndpointUrl, learningContextId }) => get(\n    urls.courseAdvanceSettings({ studioEndpointUrl, learningContextId }),\n  ),\n  uploadAsset: ({\n    learningContextId,\n    studioEndpointUrl,\n    asset,\n  }) => {\n    const data = new FormData();\n    data.append('file', asset);\n    return post(\n      urls.courseAssets({ studioEndpointUrl, learningContextId }),\n      data,\n    );\n  },\n  uploadThumbnail: ({\n    studioEndpointUrl,\n    learningContextId,\n    videoId,\n    thumbnail,\n  }) => {\n    const data = new FormData();\n    data.append('file', thumbnail);\n    return post(\n      urls.thumbnailUpload({ studioEndpointUrl, learningContextId, videoId }),\n      data,\n    );\n  },\n  checkTranscriptsForImport: ({\n    studioEndpointUrl,\n    blockId,\n    youTubeId,\n    videoId,\n  }) => {\n    const getJSON = `{\"locator\":\"${blockId}\",\"videos\":[{\"mode\":\"youtube\",\"video\":\"${youTubeId}\",\"type\":\"youtube\"},{\"mode\":\"edx_video_id\",\"type\":\"edx_video_id\",\"video\":\"${videoId}\"}]}`;\n    return get(\n      urls.checkTranscriptsForImport({\n        studioEndpointUrl,\n        parameters: encodeURIComponent(getJSON),\n      }),\n    );\n  },\n  importTranscript: ({\n    studioEndpointUrl,\n    blockId,\n    youTubeId,\n  }) => {\n    const getJSON = `{\"locator\":\"${blockId}\",\"videos\":[{\"mode\":\"youtube\",\"video\":\"${youTubeId}\",\"type\":\"youtube\"}]}`;\n    return get(\n      urls.replaceTranscript({\n        studioEndpointUrl,\n        parameters: encodeURIComponent(getJSON),\n      }),\n    );\n  },\n  getTranscript: ({\n    studioEndpointUrl,\n    language,\n    blockId,\n    videoId,\n  }) => {\n    const getJSON = { data: { lang: language, edx_video_id: videoId } };\n    return get(\n      `${urls.videoTranscripts({ studioEndpointUrl, blockId })}?language_code=${language}`,\n      getJSON,\n    );\n  },\n\n  deleteTranscript: ({\n    studioEndpointUrl,\n    language,\n    blockId,\n    videoId,\n  }) => {\n    const deleteJSON = { data: { lang: language, edx_video_id: videoId } };\n    return deleteObject(\n      urls.videoTranscripts({ studioEndpointUrl, blockId }),\n      deleteJSON,\n    );\n  },\n  uploadTranscript: ({\n    blockId,\n    studioEndpointUrl,\n    transcript,\n    videoId,\n    language,\n    newLanguage = null,\n  }) => {\n    const data = new FormData();\n    data.append('file', transcript);\n    data.append('edx_video_id', videoId);\n    data.append('language_code', language);\n    data.append('new_language_code', newLanguage || language);\n    return post(\n      urls.videoTranscripts({ studioEndpointUrl, blockId }),\n      data,\n    );\n  },\n  normalizeContent: ({\n    blockId,\n    blockType,\n    content,\n    learningContextId,\n    title,\n  }) => {\n    let response = {};\n    if (blockType === 'html') {\n      response = {\n        category: blockType,\n        courseKey: learningContextId,\n        data: content,\n        has_changes: true,\n        id: blockId,\n        metadata: { display_name: title },\n      };\n    } else if (blockType === 'problem') {\n      response = {\n        data: content.olx,\n        category: blockType,\n        couseKey: learningContextId,\n        has_changes: true,\n        id: blockId,\n        metadata: { display_name: title, ...content.settings },\n      };\n    } else if (blockType === 'video') {\n      const {\n        html5Sources,\n        edxVideoId,\n        youtubeId,\n      } = module.processVideoIds({\n        videoId: content.videoId,\n        videoUrl: content.videoSource,\n        fallbackVideos: content.fallbackVideos,\n      });\n      response = {\n        category: blockType,\n        courseKey: learningContextId,\n        display_name: title,\n        id: blockId,\n        metadata: {\n          display_name: title,\n          download_video: content.allowVideoDownloads,\n          public_access: content.allowVideoSharing,\n          edx_video_id: edxVideoId,\n          html5_sources: html5Sources,\n          youtube_id_1_0: youtubeId,\n          thumbnail: content.thumbnail,\n          download_track: content.allowTranscriptDownloads,\n          track: '', // TODO Downloadable Transcript URL. Backend expects a file name, for example: \"something.srt\"\n          show_captions: content.showTranscriptByDefault,\n          handout: content.handout,\n          start_time: durationStringFromValue(content.duration.startTime),\n          end_time: durationStringFromValue(content.duration.stopTime),\n          license: module.processLicense(content.licenseType, content.licenseDetails),\n        },\n      };\n    } else {\n      throw new TypeError(`No Block in V2 Editors named /\"${blockType}/\", Cannot Save Content.`);\n    }\n    return { ...response };\n  },\n  saveBlock: ({\n    blockId,\n    blockType,\n    content,\n    learningContextId,\n    studioEndpointUrl,\n    title,\n  }) => post(\n    urls.block({ studioEndpointUrl, blockId }),\n    module.apiMethods.normalizeContent({\n      blockType,\n      content,\n      blockId,\n      learningContextId,\n      title,\n    }),\n  ),\n  fetchVideoFeatures: ({\n    studioEndpointUrl,\n    learningContextId,\n  }) => get(\n    urls.videoFeatures({ studioEndpointUrl, learningContextId }),\n  ),\n};\n\nexport const loadImage = (imageData) => ({\n  ...imageData,\n  dateAdded: new Date(imageData.dateAdded.replace(' at', '')).getTime(),\n});\n\nexport const loadImages = (rawImages) => camelizeKeys(rawImages).reduce(\n  (obj, image) => ({ ...obj, [image.id]: module.loadImage(image) }),\n  {},\n);\n\nexport const processVideoIds = ({\n  videoId,\n  videoUrl,\n  fallbackVideos,\n}) => {\n  let youtubeId = '';\n  const html5Sources = [];\n\n  if (videoUrl) {\n    if (module.parseYoutubeId(videoUrl)) {\n      youtubeId = module.parseYoutubeId(videoUrl);\n    } else {\n      html5Sources.push(videoUrl);\n    }\n  }\n\n  if (fallbackVideos) {\n    fallbackVideos.forEach((src) => (src ? html5Sources.push(src) : null));\n  }\n\n  return {\n    edxVideoId: videoId,\n    html5Sources,\n    youtubeId,\n  };\n};\n\nexport const isEdxVideo = (src) => {\n  const uuid4Regex = new RegExp(/^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/);\n  if (src && src.match(uuid4Regex)) {\n    return true;\n  }\n  return false;\n};\n\nexport const parseYoutubeId = (src) => {\n  const youtubeRegex = new RegExp(/^((?:https?:)?\\/\\/)?((?:www|m)\\.)?((?:youtube\\.com|youtu.be))(\\/(?:[\\w-]+\\?v=|embed\\/|v\\/)?)([\\w-]+)(\\S+)?$/);\n  if (!src.match(youtubeRegex)) {\n    return null;\n  }\n  return src.match(youtubeRegex)[5];\n};\n\nexport const processLicense = (licenseType, licenseDetails) => {\n  if (licenseType === 'creative-commons') {\n    return 'creative-commons: ver=4.0'.concat(\n      (licenseDetails.attribution ? ' BY' : ''),\n      (licenseDetails.noncommercial ? ' NC' : ''),\n      (licenseDetails.noDerivatives ? ' ND' : ''),\n      (licenseDetails.shareAlike ? ' SA' : ''),\n    );\n  }\n  if (licenseType === 'all-rights-reserved') {\n    return 'all-rights-reserved';\n  }\n  return '';\n};\n\nexport const checkMockApi = (key) => {\n  if (process.env.REACT_APP_DEVGALLERY) {\n    return mockApi[key];\n  }\n  return module.apiMethods[key];\n};\n\nexport default Object.keys(apiMethods).reduce(\n  (obj, key) => ({ ...obj, [key]: checkMockApi(key) }),\n  {},\n);\n"],"mappings":"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"}