{"version":3,"file":"hooks.js","names":["_react","require","_messages","_interopRequireDefault","_module","_interopRequireWildcard","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","arr2","_i","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","err","isArray","durationMatcher","durationWidget","exports","_ref","duration","updateField","setDuration","val","initialState","module","durationString","_useState","useState","_useState2","unsavedDuration","setUnsavedDuration","useEffect","onBlur","index","e","updateDuration","inputString","onChange","onDurationChange","onKeyDown","onDurationKeyDown","getTotalLabel","_ref2","subtitle","intl","stopTime","startTime","formatMessage","messages","fullVideoLength","startsAt","durationStringFromValue","total","custom","seconds","Math","floor","minutes","hours","zeroPad","num","padStart","map","join","_ref3","newDurationString","newValue","valueFromDuration","match","trim","caretPos","document","activeElement","selectionStart","newDuration","event","blur","matches","v","unshift","_matches$map","x","parseInt","_matches$map2","_default"],"sources":["../../../../../../../../src/editors/containers/VideoEditor/components/VideoSettingsModal/components/DurationWidget/hooks.js"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nimport messages from '../messages';\n\nimport * as module from './hooks';\n\nconst durationMatcher = /^(\\d{0,2}):?(\\d{0,2})?:?(\\d{0,2})?$/i;\n\nexport const durationWidget = ({ duration, updateField }) => {\n  const setDuration = (val) => updateField({ duration: val });\n  const initialState = module.durationString(duration);\n  const [unsavedDuration, setUnsavedDuration] = useState(initialState);\n\n  useEffect(() => {\n    setUnsavedDuration(module.durationString(duration));\n  }, [duration]);\n\n  return {\n    unsavedDuration,\n    onBlur: (index) => (\n      (e) => module.updateDuration({\n        duration,\n        setDuration,\n        unsavedDuration,\n        setUnsavedDuration,\n        index,\n        inputString: e.target.value,\n      })\n    ),\n    onChange: (index) => (\n      (e) => setUnsavedDuration(module.onDurationChange(unsavedDuration, index, e.target.value))\n    ),\n    onKeyDown: (index) => (\n      (e) => setUnsavedDuration(module.onDurationKeyDown(unsavedDuration, index, e))\n    ),\n    getTotalLabel: ({ durationString, subtitle, intl }) => {\n      if (!durationString.stopTime) {\n        if (!durationString.startTime) {\n          return intl.formatMessage(messages.fullVideoLength);\n        }\n        if (subtitle) {\n          return intl.formatMessage(\n            messages.startsAt,\n            { startTime: module.durationStringFromValue(durationString.startTime) },\n          );\n        }\n        return null;\n      }\n      const total = durationString.stopTime - (durationString.startTime || 0);\n      return intl.formatMessage(\n        subtitle ? messages.custom : messages.total,\n        { total: module.durationStringFromValue(total) },\n      );\n    },\n  };\n};\n\n/**\n * durationString(duration)\n * Returns the display value for embedded start and stop times\n * @param {object} duration - object containing startTime and stopTime millisecond values\n * @return {object} - start and stop time from incoming object mapped to duration strings.\n */\nexport const durationString = (duration) => ({\n  startTime: module.durationStringFromValue(duration.startTime),\n  stopTime: module.durationStringFromValue(duration.stopTime),\n});\n\n/**\n * durationStringFromValue(value)\n * Returns a duration string in 'hh:mm:ss' format from the given ms value\n * @param {number} value - duration (in milliseconds)\n * @return {string} - duration in 'hh:mm:ss' format\n */\nexport const durationStringFromValue = (value) => {\n  // return 'why';\n  if (!value || typeof value !== 'number' || value <= 0) {\n    return '00:00:00';\n  }\n  const seconds = Math.floor((value / 1000) % 60);\n  const minutes = Math.floor((value / 60000) % 60);\n  const hours = Math.floor((value / 3600000) % 60);\n  const zeroPad = (num) => String(num).padStart(2, '0');\n  return [hours, minutes, seconds].map(zeroPad).join(':');\n};\n\n/**\n * updateDuration({ duration, unsavedDuration, setUnsavedDuration, setDuration })\n * Returns a memoized callback based on inputs that updates unsavedDuration value and form value\n * if the new string is valid (duration stores a number, unsavedDuration stores a string).\n * If the duration string is invalid, resets the unsavedDuration value to the latest good value.\n * @param {object} duration - redux-stored durations in milliseconds\n * @param {object} unsavedDuration - hook-stored duration in 'hh:mm:ss' format\n * @param {func} setDuration - set form value\n * @param {func} setUnsavedDuration - set unsavedDuration object\n * @param {string} index - startTime or stopTime\n * @param {string} inputString - string value of user input for either the start or stop time fields\n * @return {func} - callback to update duration unsavedDurationly and in redux\n *   updateDuration(args)(index, durationString)\n */\nexport const updateDuration = ({\n  duration,\n  unsavedDuration,\n  setDuration,\n  setUnsavedDuration,\n  index,\n  inputString,\n}) => {\n  let newDurationString = inputString;\n  let newValue = module.valueFromDuration(newDurationString);\n  // maxTime is 23:59:59 or 86399 seconds\n  if (newValue > 86399000) {\n    newValue = 86399000;\n  }\n  // stopTime must be at least 1 second, if not zero\n  if (index === 'stopTime' && newValue > 0 && newValue < 1000) {\n    newValue = 1000;\n  }\n  // stopTime must be at least 1 second after startTime, except 0 means no custom stopTime\n  if (index === 'stopTime' && newValue > 0 && newValue < (duration.startTime + 1000)) {\n    newValue = duration.startTime + 1000;\n  }\n  // startTime must be at least 1 second before stopTime, except when stopTime is less than a second\n  // (stopTime should only be less than a second if it's zero, but we're being paranoid)\n  if (index === 'startTime' && duration.stopTime >= 1000 && newValue > (duration.stopTime - 1000)) {\n    newValue = duration.stopTime - 1000;\n  }\n  newDurationString = module.durationStringFromValue(newValue);\n  setUnsavedDuration({ ...unsavedDuration, [index]: newDurationString });\n  setDuration({ ...duration, [index]: newValue });\n};\n\n/**\n * onDurationChange(duration)\n * Returns a new duration value based on onChange event\n * @param {object} duration - object containing startTime and stopTime millisecond values\n * @param {string} index - 'startTime or 'stopTime'\n * @param {string} val - duration in 'hh:mm:ss' format\n * @return {object} duration - object containing startTime and stopTime millisecond values\n */\nexport const onDurationChange = (duration, index, val) => {\n  const match = val.trim().match(durationMatcher);\n  if (!match) {\n    return duration;\n  }\n\n  const caretPos = document.activeElement.selectionStart;\n  let newDuration = val;\n  if (caretPos === newDuration.length && (newDuration.length === 2 || newDuration.length === 5)) {\n    newDuration += ':';\n  }\n\n  return {\n    ...duration,\n    [index]: newDuration,\n  };\n};\n\n/**\n * onDurationKeyDown(duration)\n * Returns a new duration value based on onKeyDown event\n * @param {object} duration - object containing startTime and stopTime millisecond values\n * @param {string} index - 'startTime or 'stopTime'\n * @param {Event} event - event from onKeyDown\n * @return {object} duration - object containing startTime and stopTime millisecond values\n */\nexport const onDurationKeyDown = (duration, index, event) => {\n  const caretPos = document.activeElement.selectionStart;\n  let newDuration = duration[index];\n\n  switch (event.key) {\n    case 'Enter':\n      document.activeElement.blur();\n      break;\n    case 'Backspace':\n      if (caretPos === newDuration.length && newDuration.slice(-1) === ':') {\n        newDuration = newDuration.slice(0, -1);\n      }\n      break;\n    default:\n      break;\n  }\n\n  return {\n    ...duration,\n    [index]: newDuration,\n  };\n};\n\n/**\n * valueFromDuration(duration)\n * Returns a millisecond duration value from the given 'hh:mm:ss' format string\n * @param {string} duration - duration in 'hh:mm:ss' format\n * @return {number} - duration in milliseconds. Returns null if duration is invalid.\n */\nexport const valueFromDuration = (duration) => {\n  let matches = duration.trim().match(durationMatcher);\n  if (!matches) {\n    return 0;\n  }\n  matches = matches.slice(1).filter(v => v !== undefined);\n  if (matches.length < 3) {\n    for (let i = 0; i <= 3 - matches.length; i++) {\n      matches.unshift(0);\n    }\n  }\n  const [hours, minutes, seconds] = matches.map(x => parseInt(x, 10) || 0);\n  return ((hours * 60 + minutes) * 60 + seconds) * 1000;\n};\n\nexport default {\n  durationWidget,\n  durationString,\n  durationStringFromValue,\n  updateDuration,\n  onDurationChange,\n  onDurationKeyDown,\n  valueFromDuration,\n};\n"],"mappings":"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"}