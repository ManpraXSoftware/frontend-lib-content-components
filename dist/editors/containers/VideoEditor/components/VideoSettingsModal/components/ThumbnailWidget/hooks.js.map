{"version":3,"file":"hooks.js","names":["_react","_interopRequireDefault","require","_reactRedux","_redux","constants","_interopRequireWildcard","_module","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","TypeError","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","_i","Symbol","iterator","_s","_e","_x","_r","_arr","_n","_d","next","done","push","value","err","isArray","state","exports","showSizeError","args","React","useState","createResampledFile","_ref","canvasUrl","filename","mimeType","split","bstr","atob","u8arr","Uint8Array","charCodeAt","File","type","resampleImage","_ref2","image","canvas","document","createElement","ctx","getContext","naturalWidth","MAX_WIDTH","width","height","MAX_HEIGHT","MIN_WIDTH","MIN_HEIGHT","heightRatio","cropLeft","cropTop","naturalHeight","drawImage","resampledFile","module","toDataURL","checkValidDimensions","_ref3","imageAspectRatio","Math","abs","ASPECT_RATIO","ASPECT_RATIO_ERROR_MARGIN","checkValidSize","_ref4","file","onSizeFail","size","MAX_FILE_SIZE_MB","MIN_FILE_SIZE_KB","fileInput","_ref5","setThumbnailSrc","imgRef","fileSizeError","dispatch","useDispatch","ref","useRef","click","current","addFile","e","target","files","reader","FileReader","onload","result","_module$resampleImage","_module$resampleImage2","resampledUrl","thunkActions","video","uploadThumbnail","thumbnail","actions","updateField","readAsDataURL","_module$state$showSiz","_module$state$showSiz2","setShowSizeError","show","dismiss","deleteThumbnail","_ref6","emptyCanvas","fillStyle","fillRect","_default"],"sources":["../../../../../../../../src/editors/containers/VideoEditor/components/VideoSettingsModal/components/ThumbnailWidget/hooks.js"],"sourcesContent":["import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { actions, thunkActions } from '../../../../../../data/redux';\nimport * as constants from './constants';\nimport * as module from './hooks';\n\nexport const state = {\n  showSizeError: (args) => React.useState(args),\n};\n\n/** resampledFile({ canvasUrl, filename, mimeType })\n * resampledFile takes a canvasUrl, filename, and a valid mimeType. The\n * canvasUrl is parsed and written to an 8-bit array of unsigned integers. The\n * new array is saved to  a new file with the same filename as the original image.\n * @param {string} canvasUrl - string of base64 URL for new image canvas\n * @param {string} filename - string of the original image's filename\n * @param {string} mimeType - string of mimeType for the canvas\n * @return {File} new File object\n */\nexport const createResampledFile = ({ canvasUrl, filename, mimeType }) => {\n  const arr = canvasUrl.split(',');\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new File([u8arr], filename, { type: mimeType });\n};\n\n/** resampleImage({ image, filename })\n * resampledImage takes a canvasUrl, filename, and a valid mimeType. The\n * canvasUrl is parsed and written to an 8-bit array of unsigned integers. The\n * new array is saved to  a new file with the same filename as the original image.\n * @param {File} canvasUrl - string of base64 URL for new image canvas\n * @param {string} filename - string of the image's filename\n * @return {array} array containing the base64 URL for the resampled image and the file containing the resampled image\n */\nexport const resampleImage = ({ image, filename }) => {\n  const canvas = document.createElement('canvas');\n  const ctx = canvas.getContext('2d');\n\n  // Determine new dimensions for image\n  if (image.naturalWidth > constants.MAX_WIDTH) {\n    // Set dimensions to the maximum size\n    canvas.width = constants.MAX_WIDTH;\n    canvas.height = constants.MAX_HEIGHT;\n  } else if (image.naturalWidth < constants.MIN_WIDTH) {\n    // Set dimensions to the minimum size\n    canvas.width = constants.MIN_WIDTH;\n    canvas.height = constants.MIN_HEIGHT;\n  } else {\n    // Set dimensions to the closest 16:9 ratio\n    const heightRatio = 9 / 16;\n    canvas.width = image.naturalWidth;\n    canvas.height = image.naturalWidth * heightRatio;\n  }\n  const cropLeft = (image.naturalWidth - canvas.width) / 2;\n  const cropTop = (image.naturalHeight - canvas.height) / 2;\n\n  ctx.drawImage(image, cropLeft, cropTop, canvas.width, canvas.height, 0, 0, canvas.width, canvas.height);\n\n  const resampledFile = module.createResampledFile({ canvasUrl: canvas.toDataURL(), filename, mimeType: 'image/png' });\n  return [canvas.toDataURL(), resampledFile];\n};\n\nexport const checkValidDimensions = ({ width, height }) => {\n  if (width < constants.MIN_WIDTH || height < height.MIN_WIDTH) {\n    return false;\n  }\n  const imageAspectRatio = Math.abs((width / height) - constants.ASPECT_RATIO);\n  if (imageAspectRatio >= constants.ASPECT_RATIO_ERROR_MARGIN) {\n    return false;\n  }\n  return true;\n};\nexport const checkValidSize = ({ file, onSizeFail }) => {\n  // Check if the file size is greater than 2 MB, upload size maximum, or\n  // if the file size is greater than 2 KB, upload size minimum\n  if (file.size > constants.MAX_FILE_SIZE_MB || file.size < constants.MIN_FILE_SIZE_KB) {\n    onSizeFail();\n    return false;\n  }\n  return true;\n};\n\nexport const fileInput = ({ setThumbnailSrc, imgRef, fileSizeError }) => {\n  const dispatch = useDispatch();\n  const ref = React.useRef();\n  const click = () => ref.current.click();\n  const addFile = (e) => {\n    const file = e.target.files[0];\n    const reader = new FileReader();\n    if (file && module.checkValidSize({\n      file,\n      onSizeFail: () => {\n        fileSizeError.set();\n      },\n    })) {\n      reader.onload = () => {\n        setThumbnailSrc(reader.result);\n        const image = imgRef.current;\n        image.onload = () => {\n          if (!module.checkValidDimensions({ width: image.naturalWidth, height: image.naturalHeight })) {\n            const [resampledUrl, resampledFile] = module.resampleImage({ image, filename: file.name });\n            setThumbnailSrc(resampledUrl);\n            dispatch(thunkActions.video.uploadThumbnail({ thumbnail: resampledFile }));\n            dispatch(actions.video.updateField({ thumbnail: resampledUrl }));\n            return;\n          }\n          dispatch(thunkActions.video.uploadThumbnail({ thumbnail: file }));\n          dispatch(actions.video.updateField({ thumbnail: reader.result }));\n        };\n      };\n      dispatch(actions.video.updateField({ thumbnail: ' ' }));\n      reader.readAsDataURL(file);\n    }\n  };\n  return {\n    click,\n    addFile,\n    ref,\n  };\n};\n\nexport const fileSizeError = () => {\n  const [showSizeError, setShowSizeError] = module.state.showSizeError(false);\n  return {\n    fileSizeError: {\n      show: showSizeError,\n      set: () => setShowSizeError(true),\n      dismiss: () => setShowSizeError(false),\n    },\n  };\n};\n\nexport const deleteThumbnail = ({ dispatch }) => () => {\n  dispatch(actions.video.updateField({ thumbnail: null }));\n  const emptyCanvas = document.createElement('canvas');\n  const ctx = emptyCanvas.getContext('2d');\n  emptyCanvas.width = constants.MAX_WIDTH;\n  emptyCanvas.height = constants.MAX_HEIGHT;\n  ctx.fillStyle = 'black';\n  ctx.fillRect(0, 0, emptyCanvas.width, emptyCanvas.height);\n  const file = createResampledFile({ canvasUrl: emptyCanvas.toDataURL(), filename: 'blankThumbnail.png', mimeType: 'image/png' });\n  dispatch(thunkActions.video.uploadThumbnail({ thumbnail: file, emptyCanvas }));\n};\n\nexport default {\n  fileInput,\n  fileSizeError,\n  deleteThumbnail,\n};\n"],"mappings":"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"}