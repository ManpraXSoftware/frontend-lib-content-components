{"version":3,"file":"hooks.test.js","names":["hooks","_interopRequireWildcard","require","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","mockRawOLX","mockBuiltOLX","jest","mock","fn","mockImplementation","buildOLX","describe","getContent","test","window","tinymce","editors","editorObject","fetchEditorContent","format","expect","toEqual","answers","A","hints","question","selectedFeedback","unselectedFeedback","groupFeedback","toStringMock","refMock","current","state","doc","toString","res","parseState","problem","isAdvanced","ref","assets","olx","toBe"],"sources":["../../../../../../src/editors/containers/ProblemEditor/components/EditProblemView/hooks.test.js"],"sourcesContent":["import * as hooks from './hooks';\n\nconst mockRawOLX = 'rawOLX';\nconst mockBuiltOLX = 'builtOLX';\n\njest.mock('../../data/ReactStateOLXParser', () => (\n  jest.fn().mockImplementation(() => ({\n    buildOLX: () => mockBuiltOLX,\n  }))\n));\njest.mock('../../data/ReactStateSettingsParser');\n\ndescribe('EditProblemView hooks parseState', () => {\n  describe('fetchEditorContent', () => {\n    const getContent = () => '<p>testString</p>';\n    test('returns answers', () => {\n      window.tinymce.editors = { 'answer-A': { getContent } };\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ answers: { A: '<p>testString</p>' }, hints: [] });\n    });\n    test('returns hints', () => {\n      window.tinymce.editors = { 'hint-0': { getContent } };\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ hints: ['<p>testString</p>'] });\n    });\n    test('returns question', () => {\n      window.tinymce.editors = { question: { getContent } };\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ question: '<p>testString</p>', hints: [] });\n    });\n    test('returns selectedFeedback', () => {\n      window.tinymce.editors = { 'selectedFeedback-A': { getContent } };\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ selectedFeedback: { A: '<p>testString</p>' }, hints: [] });\n    });\n    test('returns unselectedFeedback', () => {\n      window.tinymce.editors = { 'unselectedFeedback-A': { getContent } };\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ unselectedFeedback: { A: '<p>testString</p>' }, hints: [] });\n    });\n    test('returns groupFeedback', () => {\n      window.tinymce.editors = { 'groupFeedback-0': { getContent } };\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ groupFeedback: { 0: '<p>testString</p>' }, hints: [] });\n    });\n    test('returns groupFeedback', () => {\n      window.tinymce.editors = {};\n      const editorObject = hooks.fetchEditorContent({ format: '' });\n      expect(editorObject).toEqual({ hints: [] });\n    });\n  });\n  describe('parseState', () => {\n    const toStringMock = () => mockRawOLX;\n    const refMock = { current: { state: { doc: { toString: toStringMock } } } };\n\n    test('default problem', () => {\n      const res = hooks.parseState({\n        problem: 'problem',\n        isAdvanced: false,\n        ref: refMock,\n        assets: {},\n      })();\n      expect(res.olx).toBe(mockBuiltOLX);\n    });\n    test('advanced problem', () => {\n      const res = hooks.parseState({\n        problem: 'problem',\n        isAdvanced: true,\n        ref: refMock,\n        assets: {},\n      })();\n      expect(res.olx).toBe(mockRawOLX);\n    });\n  });\n});\n"],"mappings":"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"}